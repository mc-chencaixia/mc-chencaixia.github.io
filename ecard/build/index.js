$(function(){var t=document.getElementById("J_canvas"),e=t.getContext("2d"),n=document.getElementById("J_imgBg"),o=$("input"),i=$("form"),c=$("#J_btnOk"),a=$("#J_btnRst"),l={name:{x:0,y:30,fontsize:"24px",color:"#5f5d5d"},title:{x:85,y:29},phone:{x:260,y:29,fontsize:"12px",color:"#5f5d5d"},telephone:{x:40,y:95},email:{x:40,y:115},net:{x:40,y:139},website:{x:240,y:114},blog:{x:240,y:93},address:{x:40,y:164}},f={net:"杭州、广州、南京、武汉、宁波",website:"www.mchz.com.cn",blog:"blog.mchz.com.cn",name:"姓名",title:"职位信息",address:"浙江杭州西湖区万塘路30号高新东方科技园4幢一楼东室"},r={net:f.net,website:f.website,blog:f.blog,name:"",title:"",address:""},d=function(){e.drawImage(n,0,0)},u=function(t,n){if(!t||!n)return!1;var o=n.fontsize||"12px",i=n.color||"#898989",c=n.font||"微软雅黑";e.font=o+" "+c,e.fillStyle=i,e.fillText(t,n.x,n.y)},m=function(){$.each(o,function(t,e){r[e.id]=e.value||f[e.id]})},s=function(){for(var n in r)u(r[n],l[n]);var o=(e.getImageData(0,0,t.width,t.height),t.toDataURL());o&&""!=o&&c.attr("href",o)},g=function(){d(),m(),s()};i.on("blur","input",function(t){var e=t.currentTarget;r[e.id]=""==e.value?f[e.id]:e.value,d(),s()}),c.on("click",function(){}),a.on("click",function(){i[0].reset(),g()});var x=function(){g()};x()});