$(function(){var t=document.getElementById("J_canvas"),n=t.getContext("2d"),e=document.getElementById("J_imgBg"),o=$("input"),i=$("form"),c=$("#J_btnOk"),a=$("#J_btnRst"),l={name:{x:0,y:30,fontsize:"24px",color:"#5f5d5d"},title:{x:85,y:29},phone:{x:260,y:29,fontsize:"12px",color:"#5f5d5d"},telephone:{x:40,y:95},email:{x:40,y:115},net:{x:40,y:139},website:{x:240,y:114},blog:{x:240,y:93},address:{x:40,y:164}},f={net:"杭州、广州、南京、武汉、宁波",website:"www.mchz.com.cn",blog:"blog.mchz.com.cn",name:"姓名",title:"职位信息",address:"杭州市拱墅区丰潭路508号天行国际中心7号楼12楼"},r={net:f.net,website:f.website,blog:f.blog,name:"",title:"",address:""},u=function(){n.drawImage(e,0,0)},d=function(t,e){if(!t||!e)return!1;var o=e.fontsize||"12px",i=e.color||"#898989",c=e.font||"微软雅黑";n.font=o+" "+c,n.fillStyle=i,n.fillText(t,e.x,e.y)},m=function(){$.each(o,function(t,n){r[n.id]=n.value||f[n.id]})},s=function(){for(var e in r)d(r[e],l[e]);var o=(n.getImageData(0,0,t.width,t.height),t.toDataURL());o&&""!=o&&c.attr("href",o)},g=function(){u(),m(),s()},x=function(){};i.on("blur","input",function(t){var n=t.currentTarget;r[n.id]=""==n.value?f[n.id]:n.value,u(),s()}),c.on("click",function(){}),a.on("click",function(){i[0].reset(),g()});var y=function(){x(),g()};y()});